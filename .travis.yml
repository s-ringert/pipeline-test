language: php
php:
  - 7.2
before_script:
  - phpenv config-rm xdebug.ini
  - composer self-update
  - composer install

notifications:
  email:
    on_success: never
    on_failure: always

cache:
  directories:
    - $HOME/.composer/cache/files

jobs:
  include:
#    - stage: dependencies
#      script:
#        - composer install
    - stage: integration
      script:
        - composer cs-check
        - composer stan
        - composer test
    - stage: deploy

#stages:
 # - composer
  #- testing
  #- build
  #- name: deploy
   # if: branch = master
